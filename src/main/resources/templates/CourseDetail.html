<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>講座の詳細</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="detail-header">
        <button type="button" class="back-button" onclick="history.back()">戻る</button>
        <h1 class="detail-title">講座の詳細</h1>
        <div style="width: 100px;"></div> 
    </div>

    <div class="container">
        <table class="form-table">
            <tr>
                <th>講座名</th>
                <td>
                    <span th:text="${course.courseName}">プログラム開発技法</span>
                </td>
            </tr>
            <tr>
                <th>詳細</th>
                <td>
                    <div class="info-row">講師名：<span th:text="${course.instructorName}">高井 先生</span></div> 
                    <div class="info-row">形式：Web</div>
                    <div class="info-row">
                        受講料：
                        ¥<span th:text="${#numbers.formatDecimal(course.price, 0, 'COMMA', 0, 'POINT')}">XX,XXX</span> (税込)
                    </div>
                    <div class="info-row">
                        定員：<span th:text="${course.capacity}">〇〇</span>名(残り席数：<span th:text="${course.capacity}">〇〇</span>席) 
                        <span class="small-text">※1グループ5人まで</span>
                    </div>
                </td>
            </tr>
            <tr>
                <th>開催日時</th>
                <td>
                    <div class="info-row">
                        —<span th:text="${#temporals.format(course.startDate, 'yyyy年MM月dd日')}">2025年〇〇月〇〇日</span> 
                        (<span th:text="${course.dayOfWeek}">火</span>) 
                        <span th:text="${#temporals.format(course.startTime, 'HH:mm')}">10:00</span>
                        —
                        <span th:text="${#temporals.format(course.endTime, 'HH:mm')}">12:00</span>
                    </div>
                </td>
            </tr>
        </table>

        <div style="display: flex; justify-content: flex-end; align-items: flex-end; gap: 20px; margin-top: 30px;">
            <button type="button" class="apply-button" onclick="goToRegistration()">申し込む</button>
            
            <div class="participant-count-area">
                参加人数
                <input type="number" id="numParticipants" name="numParticipants" value="1" min="1" max="5">
                人
                <span class="small-text">※1人の場合でも入力してください</span>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        // 申し込むボタンがクリックされたときに、参加人数をURLに含めて受講者登録画面に遷移
        function goToRegistration() {
            const numParticipants = document.getElementById('numParticipants').value;
            // 受講者登録URLに遷移。ここでは講座IDも一緒に渡すことを推奨
            window.location.href = /*[[@{/course/register/form(courseId=${course.courseId}, participants=${numParticipants})}]]*/ 
                '/course/register/form?courseId=0&participants=1';
        }
    </script>
</body>
</html>